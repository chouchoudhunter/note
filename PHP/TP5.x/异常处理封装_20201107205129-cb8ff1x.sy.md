## 1.首先封装异常输出
{: id="20201107213552-ctdm708"}

```php
class ApiHandleException extends  Handle{
    public  $httpCode=500;
    public function render(Exception $e)
    {
        if(config('app_debug')==true){
            return parent::render($e);
        }
        if($e instanceof ApiException){
            $this->httpCode=$e->httpCode;
        }
        return show(0,$e->getMessage(),[],$this->httpCode);

    }
```
{: id="20201107213649-iqjxrvu"}

## 2.重新封装异常类，添加httpcode记录
{: id="20201107213734-qegl6q9"}

```php
class ApiException extends Exception{
    public $message='';
    public $httpCode=500;
    public $code=0;
    public  function  __construct($message = "", $httpCode = 0, $code=0)
    {
        $this->httpCode=$httpCode;
        $this->message=$message;
        $this->code=$code;

    }

}
```
{: id="20201107213813-v1ctbw7"}
